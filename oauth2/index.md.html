<meta charset="utf-8">
                            **Elements of OAuth 2.0**
                            Stijn Heymans

# Introduction

TODO

TODO: add link to book

Note that even though I use examples like _Bank Of America_ or _mint_, I use
them for illustration purposes. These companies will be doing things
differently as they operate in the _real world_. A concept I'm not directly
bothered with.

# The User Accesses A Resource Directly

You keep neat budgets, so you decide you want to check your transactions at
[Bank of America](https://bankofamerica.com). You open up your favorite browser
and you go to said site. You click _Sign-in_ and are presented with the
classical login form:

![Classical Login](./images/classic_login.png)

You faithfully enter your username and password and get to see all your
transactions of the past month. Both Whole Foods and Amazon got too much money
from you this month, again.

![Simple OAuth](./images/simple_auth.png)

We'll your username/login combo, your _credentials_ and add to that:

!!! Tip
    OAuth 2 is not about credentials.

This example also sets the stage for identifying you (aka the human) with your
browser (your _user-agent_), we'll refer to you and your browser as one (at
this point in history, a fair assumption) and name you/your browser, the
_User_.

We will call _Bank of America_, the _Resource Owner_: they own your
transactions (the resource).


![Simple OAuth](./images/simple_auth2.png)


# The User Does not access the Resource Directly

If you do not access the resource directly, for example, you are using a
budgetting tool like [mint](mint.com) that pulls the Bank of America
transaction data for you and shows it to you nicely categorized by budget.
In this case, clearly [mint](mint.com) somehow needs access to the _Resource
Owner_ on behalf of you the _User_.

The first approach that comes to mind is, well, let [mint](mint.com) ask you
for your credentials and pass them through to Bank of America whenever you it
needs Bank of America transaction data:

![Mint First Version](./images/mint_first_version.png)

We'll usually call something like [mint](mint.com) the _Client_, so that the
general scheme looks like this:

![Mint First Version Abstracted](./images/mint_first_version_abstracted.png)

Of course, [mint](mint.com) having to ask you each time to give your
credentials is terribly annoying for you, the _User_. So [mint](mint.com) might
be tempted to think _we'll ask you once, and then we'll store it so we don't
have to ask you again_.

The flow looks exactly like above, except that now [mint](mint.com) asks you
for credentials once and then stops asking you.


What is the problem with this approach?

If [mint](mint.com) gets compromised and your credentials get stolen, someone
else now can access your Bank Of America account.  You have the same problem
with if Bank of America itself gets compromised of course, but this increased
your risk with a factor of 2 (from 1 place that has your credentials, to 2
places that have your credentials). Imagine, you're using other clients than
[mint](mint.com) to access your data. That's a third place that can get
compromised. 

TODO: does the book mention other problems

# The OAuth 2 Dance

## The Players

## The Dance

Explain the interaction and all the concepts.  (Why do I need authorization
tokens versus access tokens. What are refresh tokens)

Start without authorization tokens and explain why that solves the problem but
has other problem (token can be intercepted) so you need authorization token.

# Conclusion

Restate that OAuth states your problem. Many things left out but answers the basic why with the basic players.


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-12447521-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
    dataLayer.push(arguments);
  }

  gtag('js', new Date());

  gtag('config', 'UA-12447521-1');
</script>

<link rel="stylesheet" href="https://casual-effects.com/markdeep/latest/latex.css?">
<!-- Markdeep: --><style class="fallback">body{visibility:hidden}</style><script src="https://casual-effects.com/markdeep/latest/markdeep.min.js?" charset="utf-8"></script>

